(function(){"use strict";var t={3316:function(t,e,o){var s=o(9242),r=o(3396);function a(t,e){const o=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(o)}var n=o(89);const l={},c=(0,n.Z)(l,[["render",a]]);var i=c,d=o(2483);function u(t,e,o,s,a,n){const l=(0,r.up)("PostList");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(l)])}var p=o(7139);const m={class:"container"},g=(0,r.Uk)("Create Post"),_={key:0,class:"alert alert-success fixed-top",role:"alert"},f={key:1,class:"alert alert-success fixed-top",role:"alert"},h={class:"row row-cols-1 row-cols-md-3 g-4"},v={class:"card"},P={class:"embed-responsive embed-responsive-16by9"},E=["src"],w={class:"list-group list-group-flush"},T={class:"badge bg-primary"},b={class:"card-body"},S={class:"card-text"},D={class:"card-text"},y={class:"card-text"},O=(0,r.Uk)("Edit post");function A(t,e,o,s,a,n){const l=(0,r.up)("router-link"),c=(0,r.up)("DeletePost");return(0,r.wg)(),(0,r.iD)("div",m,[(0,r._)("div",null,[(0,r.Wm)(l,{class:"btn btn-primary my-3",to:"/create-post"},{default:(0,r.w5)((()=>[g])),_:1})]),t.showCreateAlert?((0,r.wg)(),(0,r.iD)("div",_," Post created successfully ")):(0,r.kq)("",!0),t.showDeleteAlert?((0,r.wg)(),(0,r.iD)("div",f," Post deleted successfully ")):(0,r.kq)("",!0),(0,r._)("div",h,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.sortedPosts,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"col",key:e.id},[(0,r._)("div",v,[(0,r._)("div",P,[(0,r._)("img",{class:"card-img-top",src:e.image},null,8,E)]),(0,r._)("ul",w,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.tags,(t=>((0,r.wg)(),(0,r.iD)("li",{class:"list-group-item",key:t},[(0,r._)("span",T,(0,p.zw)(t),1)])))),128))]),(0,r._)("div",b,[(0,r._)("p",S,(0,p.zw)(e.description),1),(0,r._)("p",D,"created_at: "+(0,p.zw)(t.formatDate(e.created_at)),1),(0,r._)("p",y,"updated_at: "+(0,p.zw)(t.formatDate(e.updated_at)),1),(0,r.Wm)(l,{to:`/edit-post/${e.id}`,class:"btn btn-primary me-2"},{default:(0,r.w5)((()=>[O])),_:2},1032,["to"]),(0,r.Wm)(c,{postId:e.id},null,8,["postId"])])])])))),128))])])}var L=o(65);function C(t,e,o,s,a,n){return(0,r.wg)(),(0,r.iD)("button",{class:"btn btn-danger",onClick:e[0]||(e[0]=(...e)=>t.confirmDeletePost&&t.confirmDeletePost(...e))},"Delete post")}var Z=(0,r.aZ)({name:"DeletePost",props:{postId:{type:Number,required:!0}},methods:{confirmDeletePost(){confirm("Are you sure you want to delete this post?")&&this.deletePost(this.postId)},...(0,L.nv)(["deletePost"])}});const x=(0,n.Z)(Z,[["render",C]]);var k=x,R=(0,r.aZ)({name:"PostList",components:{DeletePost:k},computed:{...(0,L.Se)(["sortedPosts","showDeleteAlert","showCreateAlert"])},created(){this.fetchPosts()},methods:{...(0,L.nv)(["deletePost","fetchPosts"]),formatDate(t){const e=new Date(t),o={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZone:"Africa/Lagos"};return e.toLocaleString(void 0,o)}}});const V=(0,n.Z)(R,[["render",A]]);var H=V,U=(0,r.aZ)({name:"HomeView",components:{PostList:H}});const W=(0,n.Z)(U,[["render",u]]);var M=W;const $={class:"container"},j=(0,r._)("div",{class:"row"},[(0,r._)("div",{class:"col-12 text-center"},[(0,r._)("h2",{class:"pt-3"},"Create Post")])],-1),q={class:"row"},I=(0,r._)("div",{class:"col-3"},null,-1),z={class:"col-6"},F={class:"form-group"},G=(0,r._)("label",null,"Image URL:",-1),K={class:"form-group"},Y=(0,r._)("label",{for:"tags"},"Tags",-1),N={class:"form-group"},B=(0,r._)("label",null,"Description:",-1),J=(0,r._)("button",{class:"btn btn-primary mt-3"},"Submit",-1);function Q(t,e,o,a,n,l){const c=(0,r.up)("multiselect");return(0,r.wg)(),(0,r.iD)("div",$,[j,(0,r._)("div",q,[I,(0,r._)("div",z,[(0,r._)("form",{onSubmit:e[3]||(e[3]=(0,s.iM)(((...e)=>t.submitPost&&t.submitPost(...e)),["prevent"]))},[(0,r._)("div",F,[G,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=e=>t.image=e),class:"form-control",required:""},null,512),[[s.nr,t.image]])]),(0,r._)("div",K,[Y,(0,r.Wm)(c,{modelValue:t.tags,"onUpdate:modelValue":e[1]||(e[1]=e=>t.tags=e),options:t.allTags,multiple:!0,"close-on-select":!0,placeholder:"Select tags",class:"form-control",required:""},null,8,["modelValue","options"])]),(0,r._)("div",N,[B,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.description=e),class:"form-control",required:""},null,512),[[s.nr,t.description]])]),J],32)])])])}var X=o(4870),tt=o(6368),et=(0,r.aZ)({name:"CreatePost",components:{Multiselect:tt.ZP},setup(){const t=(0,L.oR)(),e=(0,X.iH)(""),o=(0,X.iH)([]),s=(0,X.iH)(""),a=(0,r.Fl)((()=>t.state.allTags)),n=()=>{const r={image:e.value,tags:o.value,description:s.value};t.dispatch("savePost",r).then((()=>{e.value="",o.value=[],s.value=""})).catch((t=>{console.error("Error saving post:",t)}))};return{image:e,tags:o,description:s,allTags:a,submitPost:n}}});const ot=(0,n.Z)(et,[["render",Q]]);var st=ot;const rt={class:"container"},at=(0,r._)("div",{class:"row"},[(0,r._)("div",{class:"col-12 text-center"},[(0,r._)("h2",{class:"pt-3"},"Update Post")])],-1),nt={class:"row"},lt=(0,r._)("div",{class:"col-3"},null,-1),ct={class:"col-6"},it={class:"form-group"},dt=(0,r._)("label",null,"ImageURL:",-1),ut={class:"form-group"},pt=(0,r._)("label",{for:"tags"},"Tags",-1),mt={class:"form-group"},gt=(0,r._)("label",null,"Description:",-1),_t=(0,r._)("button",{type:"submit",class:"btn btn-primary mt-3"},"Update",-1);function ft(t,e,o,a,n,l){const c=(0,r.up)("multiselect");return(0,r.wg)(),(0,r.iD)("div",rt,[at,(0,r._)("div",nt,[lt,(0,r._)("div",ct,[(0,r._)("form",{onSubmit:e[3]||(e[3]=(0,s.iM)((e=>t.updatePost(t.selectedPost.id)),["prevent"]))},[(0,r._)("div",it,[dt,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=e=>t.selectedPost.image=e),class:"form-control",required:""},null,512),[[s.nr,t.selectedPost.image]])]),(0,r._)("div",ut,[pt,(0,r.Wm)(c,{modelValue:t.selectedPost.tags,"onUpdate:modelValue":e[1]||(e[1]=e=>t.selectedPost.tags=e),options:t.allTags,multiple:!0,"close-on-select":!0,placeholder:"Select tags",class:"form-control",required:""},null,8,["modelValue","options"])]),(0,r._)("div",mt,[gt,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.selectedPost.description=e),class:"form-control",required:""},null,512),[[s.nr,t.selectedPost.description]]),_t])],32)])])])}var ht=(0,r.aZ)({name:"EditPost",components:{Multiselect:tt.ZP},computed:{...(0,L.rn)(["selectedPost","allTags"])},created(){const t=this.$route.params.id;this.fetchPost(t)},methods:{...(0,L.nv)(["fetchPost","fetchAllTags","updatePost"])}});const vt=(0,n.Z)(ht,[["render",ft]]);var Pt=vt;const Et=[{path:"/",name:"home",component:M},{path:"/post-list",name:"post-list",component:H},{path:"/create-post",name:"create-post",component:st},{path:"/edit-post/:id",name:"edit-post",component:Pt},{path:"/delete-post/:id",name:"delete-post",component:k}],wt=(0,d.p7)({history:(0,d.PO)("/"),routes:Et});var Tt=wt,bt=(o(560),o(4161));const St="http://localhost:3000",Dt=(0,L.MT)({state:{posts:[],showDeleteAlert:!1,showCreateAlert:!1,selectedPost:{id:"",image:"",tags:[],description:"",created_at:"",updated_at:""},allTags:["transport","sports","people","nightlife","nature","food","fashion","city","cats","business","other"]},getters:{sortedPosts:t=>t.posts.slice().sort(((t,e)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime())),showDeleteAlert:t=>t.showDeleteAlert,showCreateAlert:t=>t.showCreateAlert},mutations:{SET_POSTS(t,e){t.posts=e},SET_SELECTED_POST(t,e){t.selectedPost=e},SET_SELECTED_TAGS(t,e){t.selectedPost.tags=e},REMOVE_DELETED_POST(t,e){t.posts=t.posts.filter((t=>t.id!==e))},SET_SHOW_DELETE_ALERT(t,e){t.showDeleteAlert=e},SET_SHOW_CREATE_ALERT(t,e){t.showCreateAlert=e}},actions:{fetchPosts({commit:t}){return bt.Z.get(`${St}/posts`).then((e=>(console.log("Posts:",e.data),t("SET_POSTS",e.data),e.data))).catch((t=>{throw console.error("Error fetching posts:",t),t}))},fetchPost({commit:t},e){bt.Z.get(`${St}/posts/${e}`).then((e=>{t("SET_SELECTED_POST",e.data),t("SET_SELECTED_TAGS",e.data.tags)})).catch((t=>{console.error("Error fetching post:",t)}))},updatePost({state:t},e){const o={id:"",image:t.selectedPost.image,tags:t.selectedPost.tags,description:t.selectedPost.description,created_at:t.selectedPost.created_at,updated_at:(new Date).toISOString()};bt.Z.put(`${St}/posts/${e}`,o).then((t=>{console.log("Post updated:",t.data),Tt.push("/post-list")})).catch((t=>{console.error("Error updating post:",t)}))},deletePost({commit:t},e){return bt.Z.delete(`${St}/posts/${e}`).then((()=>{console.log("Post deleted successfully"),t("REMOVE_DELETED_POST",e),t("SET_SHOW_DELETE_ALERT",!0),setTimeout((()=>{t("SET_SHOW_DELETE_ALERT",!1)}),3e3)})).catch((t=>{throw console.error("Error deleting post:",t),t}))},savePost({commit:t},e){const o={...e,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};return bt.Z.post(`${St}/posts`,o).then((e=>{console.log("Post created:",e.data),Tt.push("/post-list"),t("SET_SHOW_CREATE_ALERT",!0),setTimeout((()=>{t("SET_SHOW_CREATE_ALERT",!1)}),3e3)})).catch((t=>{throw console.error("Error creating post:",t),t}))}}});var yt=Dt;o(2166),o(6744);(0,s.ri)(i).use(yt).use(Tt).mount("#app")}},e={};function o(s){var r=e[s];if(void 0!==r)return r.exports;var a=e[s]={exports:{}};return t[s].call(a.exports,a,a.exports,o),a.exports}o.m=t,function(){var t=[];o.O=function(e,s,r,a){if(!s){var n=1/0;for(d=0;d<t.length;d++){s=t[d][0],r=t[d][1],a=t[d][2];for(var l=!0,c=0;c<s.length;c++)(!1&a||n>=a)&&Object.keys(o.O).every((function(t){return o.O[t](s[c])}))?s.splice(c--,1):(l=!1,a<n&&(n=a));if(l){t.splice(d--,1);var i=r();void 0!==i&&(e=i)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[s,r,a]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,a,n=s[0],l=s[1],c=s[2],i=0;if(n.some((function(e){return 0!==t[e]}))){for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(c)var d=c(o)}for(e&&e(s);i<n.length;i++)a=n[i],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(d)},s=self["webpackChunkcreate_and_manage_post"]=self["webpackChunkcreate_and_manage_post"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(3316)}));s=o.O(s)})();
//# sourceMappingURL=app.3bc0cc02.js.map